<<<<<<< HEAD
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ course_info.original_name if course_info and course_info.original_name else 'SCORM Player' }}</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="/static/lms_api_mock.js"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      background-color: #121212;
      color: #fff;
      overflow: hidden;
    }
    .player-header {
      background: #0d6efd;
      padding: 0.75rem 1.25rem;
      font-size: 1.1rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      box-shadow: 0 2px 8px rgba(0,0,0,0.3);
    }
    iframe {
      border: none;
      width: 100%;
      height: calc(100% - 58px);
      background: #000;
    }
    .status {
      font-size: 0.85rem;
      color: #bdbdbd;
    }
  </style>
</head>
<body>

  <div class="player-header">
    <div>
      üéì <strong>{{ course_info.original_name if course_info else 'SCORM Course' }}</strong>
      <span class="status">({{ lang | upper }})</span>
    </div>
    <div>
      <a href="{{ url_for('library') }}" class="btn btn-light btn-sm">‚Üê Back to Library</a>
    </div>
  </div>

  <!-- Course Frame -->
  <iframe id="scormFrame" src="{{ course_url }}" allowfullscreen></iframe>

  <script>
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  //  SCORM LMS API Mock (Prevents LMS Error Popups)
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  window.API = window.API_1484_11 = {
    LMSInitialize: function() { console.log("LMSInitialize() called"); return "true"; },
    LMSFinish: function() { console.log("LMSFinish() called"); return "true"; },
    LMSGetValue: function(k) { console.log("LMSGetValue:", k); return ""; },
    LMSSetValue: function(k,v) { console.log("LMSSetValue:", k, v); return "true"; },
    LMSCommit: function() { console.log("LMSCommit()"); return "true"; },
    LMSGetLastError: function() { return "0"; },
    LMSGetErrorString: function() { return "No error"; },
    LMSGetDiagnostic: function() { return "No diagnostic"; },
    Initialize: function() { console.log("Initialize() called"); return "true"; },
    Terminate: function() { console.log("Terminate() called"); return "true"; },
    GetValue: function(k) { console.log("GetValue:", k); return ""; },
    SetValue: function(k,v) { console.log("SetValue:", k, v); return "true"; },
    Commit: function() { console.log("Commit()"); return "true"; },
    GetLastError: function() { return "0"; },
    GetErrorString: function() { return "No error"; },
    GetDiagnostic: function() { return "No diagnostic"; }
  };

  // Prevent LMS API ‚Äúnot found‚Äù popups inside Storyline or Captivate content
  window.onerror = function(msg, src, line, col, err) {
    if (String(msg).includes("LMS API")) {
      console.warn("Suppressed SCORM API warning:", msg);
      return true;
    }
    return false;
  };

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  //  Manifest-Based Fallback Detection
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  const iframe = document.getElementById('scormFrame');

  iframe.addEventListener('error', () => {
    document.body.innerHTML = `
      <div class="d-flex flex-column align-items-center justify-content-center h-100 text-center">
        <h3 class="text-danger mb-3">‚ö† Unable to load SCORM course</h3>
        <p class="text-muted">The specified launch file could not be loaded.</p>
        <a href="{{ url_for('library') }}" class="btn btn-primary mt-2">‚Üê Back to Library</a>
      </div>`;
  });

  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  //  Keep Frame Responsive
  // ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
  window.addEventListener('resize', () => {
    iframe.style.height = `${window.innerHeight - document.querySelector('.player-header').offsetHeight}px`;
  });
  </script>
</body>
</html>
=======
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>{{ course_info.original_name or 'SCORM Player' }}</title>
  <style>
    html, body { margin: 0; padding: 0; height: 100%; overflow: hidden; }
    iframe { width: 100%; height: 100%; border: none; }
  </style>
  <script src="/static/lms_api_mock.js"></script>
</head>
<body>
  <iframe src="{{ course_url }}"></iframe>
</body>
</html>
>>>>>>> 0b1e9e43 (SCORM Audio Translation)
